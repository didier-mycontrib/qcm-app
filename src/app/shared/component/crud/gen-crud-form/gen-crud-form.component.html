<my-toggle-panel [title]="title" [(panelOpenState)]="tablePanelOpenState">

    <form #formObject="ngForm">  
 
        @if(optionalSpecificSubFormTemplateRef()){
           <ng-container 
           [ngTemplateOutlet]="optionalSpecificSubFormTemplateRef()??null"
           [ngTemplateOutletContext]="{subFormData : subFormData}" ></ng-container>
        }
        @else{
        <app-automatic-gen-sub-form    
             [(objectTempRef)]="objectTempRef"
             [idKeyName]="idKeyName()"
             [(modeRef)]="modeRef"
             [withAutoGeneratedId]="withAutoGeneratedId()">
        </app-automatic-gen-sub-form>
        }
         <div class="flexRowWrap">
             <div class="f-align">
                  <button (click)="onAction('update')" class="btn-primary" 
                      [style.visibility]="(modeRef()!='newOne'  && availableActions().includes('UPDATE'))?'visible':'hidden'"
                      [disabled]="!formObject.form.valid || !hasBeenChanged()"  >update 
                      <mat-icon inline=true class="update">save</mat-icon> </button>&nbsp;
                  <button (click)="onAction('new')"[style.visibility]="(availableActions().includes('NEW'))?'visible':'hidden'"
                        class="btn-primary"> new
                    <mat-icon inline=true class="new">create</mat-icon> </button>  &nbsp;
                  <button (click)="onAction('add')" [disabled]="!formObject.form.valid"
                          [style.visibility]="(modeRef()=='newOne' && availableActions().includes('ADD'))?'visible':'hidden'" >add
                          <mat-icon inline=true class="add">add</mat-icon>  </button> &nbsp;
                  <button (click)="onAction('delete')" [style.visibility]="(modeRef()!='newOne'  && availableActions().includes('DELETE') )?'visible':'hidden'" >
                    delete <mat-icon inline=true class="delete">delete</mat-icon></button>
             </div> 
         </div><!-- end of flexRowWrap -->
     </form><!-- end of form -->
   
     <my-message [message]="messageRef()"></my-message>

</my-toggle-panel>

